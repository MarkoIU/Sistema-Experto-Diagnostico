<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Diagn√≥stico de Perif√©ricos</title>
  <link rel="icon" href="Images/PC Troubleshooting.png" type="image/x-icon">
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="container">
    <h2>Asistente de Diagn√≥stico de Perif√©ricos</h2>

    <div id="question-section">
      <p id="question"></p>
      <p id="hint" class="hint"></p>

      <div class="image-frame">
        <img id="hint-image" src="Images/printer-start.png" alt="Imagen de ayuda">
      </div>

      <button onclick="answer('yes')">S√≠</button>
      <button onclick="answer('no')">No</button>
      <button onclick="showWhy()">¬øPor qu√©?</button>

      <div id="explanation-box" style="display: none; margin-top: 20px;">
        <div class="solution-container">
          <h3>Explicaci√≥n</h3>
          <p id="explanation-text"></p>
          <button onclick="closeExplanation()">Cerrar</button>
        </div>
      </div>
    </div>

    <div id="result-section" style="display: none;">
      <div class="solution-container">
        <h3>Acci√≥n Recomendada</h3>
        <p id="recommendation"></p>
      </div>
      
      <div class="image-frame">
        <img id="result-image" src="" alt="Imagen del resultado" style="display: none;">
      </div>

      <div class="conclusion-container">
        <h3>Conclusi√≥n</h3>
        <p id="conclusion"></p>
      </div>

      <button onclick="showHow()">¬øC√≥mo se concluy√≥?</button>

      <div id="how-section" class="conclusion-container" style="display: none;">
        <h3>C√≥mo se Concluy√≥</h3>
        <p id="how-text"></p>
      </div>

      <button onclick="location.reload()">Reiniciar</button>
    </div>

    <a href="troubleshoot.html" class="back-button">‚Üê Volver</a>
  </div>

  <script>
    const questions = [
      {
        q: "¬øLos trabajos de impresi√≥n est√°n atascados en la cola o la impresora aparece como 'sin conexi√≥n' a pesar de estar encendida?",
        hint: "üí° Verifica la cola de impresi√≥n y aseg√∫rate de que la impresora est√© en l√≠nea en la configuraci√≥n del sistema.",
        image: "Images/printerQueue.png",
        yes: "¬øEl Administrador de dispositivos muestra 'Dispositivo desconocido' o errores como el c√≥digo 28 o 39?",
        no: {
          rec: "La impresora parece estar conectada y lista.",
          con: "Sin problemas de cola ni estado fuera de l√≠nea.",
          how: "Respondiste 'No', lo que indica que la impresora est√° reconocida e inactiva. Procede a probar la impresi√≥n si a√∫n no lo has hecho."
        },
        why: "Para determinar si el sistema est√° enviando trabajos a la impresora y si esta es reconocida."
      },
      {
        q: "¬øEl Administrador de dispositivos muestra 'Dispositivo desconocido' o errores como el c√≥digo 28 o 39?",
        hint: "üí° Abre el Administrador de dispositivos y revisa la impresora en 'Impresoras' o 'Dispositivos desconocidos'.",
        image: "Images/error28.png",
        yes: "¬øHas reinstalado manualmente el controlador de la impresora desde la p√°gina oficial?",
        no: {
          rec: "El controlador parece estar instalado correctamente. Procede a verificar la conexi√≥n USB.",
          con: "El controlador parece funcional.",
          how: "Como respondiste 'No', el problema podr√≠a estar relacionado con el hardware."
        },
        why: "Para verificar si el problema est√° relacionado con el controlador."
      },
      {
        q: "¬øHas reinstalado manualmente el controlador de la impresora desde la p√°gina oficial?",
        hint: "üí° Descarga el controlador m√°s reciente desde la p√°gina de soporte del fabricante e inst√°lalo.",
        image: "Images/Printerdriver.png",
        yes: "¬øLa impresora sigue sin imprimir despu√©s de reinstalar el controlador?",
        no: {
          rec: "La reinstalaci√≥n del controlador resolvi√≥ el problema.",
          con: "Problema con el controlador resuelto.",
          how: "Respondiste 'No', lo que indica que la reinstalaci√≥n funcion√≥."
        },
        why: "Para confirmar si una instalaci√≥n nueva del controlador resuelve el problema."
      },
      {
        q: "¬øLa impresora sigue sin imprimir despu√©s de reinstalar el controlador?",
        hint: "üí° Intenta imprimir una p√°gina de prueba despu√©s de la reinstalaci√≥n.",
        image: "Images/TestPage.png",
        yes: "¬øLa impresora funciona si la conectas a otro puerto USB en el mismo PC usando el mismo cable?",
        no: {
          rec: "La impresora ahora funciona tras la reinstalaci√≥n.",
          con: "La reinstalaci√≥n del controlador resolvi√≥ el problema.",
          how: "Respondiste 'No', por lo que el problema se resolvi√≥ con la reinstalaci√≥n."
        },
        why: "Para verificar si el problema persiste despu√©s de arreglar el controlador."
      },
      {
        q: "¬øLa impresora funciona si la conectas a otro puerto USB en el mismo PC con el mismo cable?",
        hint: "üí° Desconecta del puerto actual y usa otro diferente en el mismo equipo.",
        image: "Images/printerUSBPort.jpg",
        yes: {
          rec: "Reemplaza o evita usar el puerto USB defectuoso.",
          con: "Puerto USB defectuoso identificado.",
          resultImage: "Images/otherUSBPort.jpg",
          how: "Respondiste 'S√≠'. El puerto original est√° defectuoso."
        },
        no: "¬øLa impresora funciona con otro cable USB?",
        why: "Para aislar el problema al puerto USB."
      },
      {
        q: "¬øLa impresora funciona con otro cable USB?",
        hint: "üí° Sustituye el cable por uno que sepas que funciona.",
        image: "Images/printerCable.jpg",
        yes: {
          rec: "Reemplaza el cable USB original.",
          con: "Cable USB defectuoso identificado.",
          resultImage: "Images/usbPrinterCable.jpg",
          how: "Respondiste 'S√≠'. El cable est√° da√±ado y debe reemplazarse."
        },
        no: "¬øLa impresora funciona si la conectas a otro PC con el mismo sistema operativo y controladores?",
        why: "Para determinar si el problema est√° en el cable USB."
      },
      {
        q: "¬øLa impresora funciona si la conectas a otro PC con el mismo sistema operativo y controladores?",
        hint: "üí° Prueba la impresora en otra computadora con configuraci√≥n similar.",
        image: "Images/printerOtherPC.png",
        yes: {
          rec: "Verifica el servicio de cola de impresi√≥n de Windows (services.msc).",
          con: "Posible problema con el servicio de cola.",
          resultImage: "Images/printerSpooler.png",
          how: "Respondiste 'S√≠', lo que indica que el problema est√° en el sistema operativo o software del PC original."
        },
        no: {
          rec: "La impresora parece tener una falla de hardware que requiere evaluaci√≥n t√©cnica.",
          con: "La impresora est√° defectuosa.",
          how: "Respondiste 'No'. Se confirma que el problema es de hardware.",
          resultImage: "Images/faultyPrinter.png"
        },
        why: "Para confirmar si el problema es f√≠sico de la impresora."
      }
    ];

    let step = 0;

    function answer(response) {
      const question = questions[step];
      const recommendation = document.getElementById('recommendation');
      const conclusion = document.getElementById('conclusion');
      const howText = document.getElementById('how-text');

      if (typeof question[response] === 'object') {
        recommendation.textContent = question[response].rec;
        conclusion.textContent = question[response].con;
        howText.textContent = question[response].how || '';
        
        document.getElementById('how-section').style.display = 'none';

        const resultImage = document.getElementById('result-image');
        if (question[response].resultImage) {
          resultImage.src = question[response].resultImage;
          resultImage.style.display = 'block';
        } else {
          resultImage.style.display = 'none';
        }

        document.getElementById('question-section').style.display = 'none';
        document.getElementById('result-section').style.display = 'block';
      } else if (typeof question[response] === 'string') {
        step++;
        updateQuestion();
      }
    }

    function updateQuestion() {
      const q = questions[step];
      document.getElementById('question').textContent = q.q;
      document.getElementById('hint').textContent = q.hint || '';
      document.getElementById('hint-image').src = q.image || '';
      document.getElementById('hint-image').alt = `Step ${step + 1}`;
    }

    function showWhy() {
      const explanationText = document.getElementById('explanation-text');
      explanationText.textContent = questions[step].why || "No hay explicaci√≥n disponible.";
      document.getElementById('explanation-box').style.display = 'block';
    }

    function showHow() {
      document.getElementById('how-section').style.display = 'block';
    }

    function closeExplanation() {
      document.getElementById('explanation-box').style.display = 'none';
    }

    window.onload = updateQuestion;
  </script>
</body>
</html>
